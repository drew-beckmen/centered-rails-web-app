<h1><%= @group.name %></h2>
<p><strong>Description: </strong><%= @group.description %></p>
<img src="<%= @group.img_url %>">
<h2>Members List</h2>
<ul>
    <% @group.users.each do |user| %>
        <li><%= link_to user.name, user_path(user) %></li>
    <% end %>
</ul>
<% if @group.belong?(@user) %>
    <%= form_with model: @membership, method: "delete"  do |f| %>
        <%= f.hidden_field :group_id, :value => @group.id %>
        <%= f.hidden_field :user_id, :value => session[:user_id] %>
        <%= f.submit "Leave Group" %>
    <% end %>
<% else %>
    <%= form_with model: @membership do |f| %>
        <%= f.hidden_field :group_id, :value => @group.id %>
        <%= f.hidden_field :user_id, :value => session[:user_id] %>
        <%= f.submit "Join Group" %>
    <% end %>
<% end %>

<% if @group.is_creator?(@user) %>
    <%= form_with model: @group, method: "delete"  do |f| %>
        <%= f.submit "Delete Group" %>
    <% end %>
<% end %>


<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = "<%= url_for @group %>";  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = "<%= @group.id %>"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://centered-1.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


